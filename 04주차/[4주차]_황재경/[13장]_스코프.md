# 📒13장_ 스코프
### 📑목차
- [스코프(scope)](#스코프scope)
- [스코프 종류](#스코프-종류)
- [스코프 체인(scope chain)](#스코프-체인scope-chain)
- [렉시컬 스코프(lexical scope)](#렉시컬-스코프lexical-scope)

### ⚡Quick Summary
- 스코프(scope)
    > 식별자가 유효한 범위
    - 스코프 내에서 식별자는 유일해야 함
        - `var`은 같은 스코프 내에서 중복 선언 가능
        - `let`, `const`는 같은 스코프 내에서 중복 선언 불가능
    - 식별자를 검색하는 규칙
- 스코프 체인(scope chain)
    > **하위 스코프에서 상위 스코프로 단방향**으로 이동하며 *식별자 검색(identifier resolution)*, 즉 가장 가까운 스코프에서 선언된 식별자 사용
- `var` 키워드로 선언된 변수 = *함수 레벨 스코프(function level scope)*
- `let`, `const` 키워드로 선언된 변수 = *블록 레벨 스코프(block level scope)*
- 자바스크립트는 *렉시컬 스코프(lexical scope)* 또는 *정적 스코프(static scope)* 를 따름
    > **함수를 어디서 정의했는지**에 따라 함수의 상위 스코프 결정

## 📌스코프(scope)
> 모든 식별자(변수 이름, 함수 이름, 클래스 이름 등)는 자신이 선언된 위치에 의해 다른 코드가 식별자 자신을 참조할 수 있는 유효 범위가 결정됨
- 자바스크립트 엔진은 이름이 같은 변수들 중에서 어떤 변수를 참조할 것인지를 결정<br>⇒ *식별자 결정(identifier resolution)*
    - 코드가 어디서 실행되며 주변에 어떤 코드가 있는지 고려<br>= 코드의 문맥(context)<br>= *렉시컬 환경(lexical environment)*
- 스코프 내에서 식별자는 유일해야 하지만 다른 스코프에는 같은 이름의 식별자를 사용할 수 있음
    - `var` 키워드로 선언된 변수는 같은 스코프 내에서 중복 선언 허용
    - `let`이나 `const` 키워드로 선언된 변수는 같은 스코프 내에서 중복 선언 허용 X
## 📌스코프 종류
|구분|설명|스코프|변수|
|--|--|--|--|
|전역(global)|코드의 가장 바깥 영역<br>어디서든지 참조 가능|전역 스코프|전역 변수|
|지역(local)|함수 몸체 내부<br>자신의 지역 스코프와 하위 스코프에서 유효|지역 스코프|지역 변수|

## 📌스코프 체인(scope chain)
> 스코프가 (함수의 중첩에 의해) 계층적으로 연결되는 것
- ✔️변수를 참조할 때 자바스크립트 엔진은 스코프 체인을 통해 변수를 참조하는 코드의 스코프에서 시작하여 **상위 스코프 방향(단방향)으로 이동**하며 *선언된 변수를 검색(identifier resolution)* = ***현재 스코프에서 가장 가까운 곳에서 선언된 변수를 사용***
    ```jsx
    var x = "global x";
    var y = "global y";

    function outer() {
        var z = "outer's local z";

        function inner() {
            var x = "inner's local x";
        }

        inner();
    }

    outer();
    ```
    ```bash
    +---------------------------+
    |        전역 스코프         |
    +---------------------------+
    |   x   |    "global x"     |
    +---------------------------+
    |   y   |    "global y"     |
    +---------------------------+
    | outer | <function object> |
    +---------------------------+
                ↑
                |
    +-------------·-------------+
    |     outer 지역 스코프      |
    +---------------------------+
    |   z   | "outer's local z" |
    +---------------------------+
    | inner | <function object> |
    +---------------------------+
                ↑
                |
    +-------------·-------------+
    |     inner 지역 스코프      |
    +---------------------------+
    |   x   | "inner's local x" |
    +---------------------------+
    ```
- 함수 레벨 스코프(function level scope)
    - `var` 키워드로 선언된 변수는 코드 블록이 아닌 함수의 코드 블록(함수 몸체)에 의해서만 지역 스코프가 생성됨 = ***함수 레벨 스코프(function level scope)***
    - `let`, `const` 키워드로 선언된 변수는 코드 블록(if, for, while, try/catch 등)에 의해 지역 스코프가 생성됨 = ***블록 레벨 스코프(block level scope)***

## 📌렉시컬 스코프(lexical scope)
- *동적 스코프(dynamic scope)*
    > **함수를 어디서 호출했는지**에 따라 함수의 상위 스코프 결정
- *렉시컬 스코프(lexical scope)* 또는 *정적 스코프(static scope)* 👈 자바스크립트
    > **함수를 어디서 정의했는지**에 따라 함수의 상위 스코프 결정
```jsx
var x = 1;

function foo() {
  var x = 10;
  bar();
}

function bar() {
  console.log(x);
}

foo(); // 1
bar(); // 1
```