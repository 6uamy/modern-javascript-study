# 15장 let, const 키워드와 블록 레벨 스코프

### 1. var 키워드로 선언한 변수의 문제점

**1) 변수의 중복 선언 허용**

```jsx
var x = 1;
var y = 2;

var x = 100;
var y; // 초기화 문이 없는 중복 변수 선언문은 무시

console.log(x); // 100
console.log(y); // 1
```

var 키워드는 이미 선언된 변수를 재선언 할 때 오류가 발생하지 않는 문제가 있다.

**2) 함수 레벨 스코프**

```jsx
var x = 1;

if (true) {
  var x = 10;
}

console.log(x); // 10
```

`var` 키워드로 선언한 변수는 오직 함수의 코드 블럭만을 지역 스코프로 인정한다.

그 이외 조건문 또는 반복문 등 어느 블럭 스코프에서 재 선언 하더라도 모두 전역변수가 된다.

**3) 변수 호이스팅**

`var` 키워드로 변수를 선언하면 호이스팅으로 인해 선언문 이전에 변수 참조가 가능하다는 문제가 있다. 이 때 변수는 `undefined` 를 값으로 갖는다.

### 2. let 키워드

**1) 변수 중복 선언 금지**

```jsx
let x = 1;
let x = 2; // Syntax Error
```

`let` 키워드는 재선언 시 오류를 발생한다.

**2) 블록 레벨 스코프**

```jsx
let x = 1;

{
  let x = 2;
  let y = 3;
}
console.log(x); // 1
console.log(y); // Reference Error
```

`let` 키워드는 모든 블럭을 지역스코프로 인정하기 때문에

전역변수 `x` 와 코드블럭 내 지역변수 `x` 는 다른 스코프에 존재하는 별개의 변수이다.

같은 원리로 `y` 는 생명주기가 블럭 내에서 존재하기 때문에 전역에서 참조할 수 없다.

**3) 변수 호이스팅**

`let` 키워드로 선언한 변수는 호이스팅이 **발생하지 않는 것처럼 동작한다.**

구체적으로 JS 엔진에 의해 **암묵적으로 선언단계는 이루어지나,** **초기화단계(undefined)는 런타임**에서 일어나므로 선언문을 실행하기 전 참조할 수 없다.

`var` ⇒ 호이스팅 시점에 **“선언 단계” + “초기화 단계”** 수행

`let` ⇒ 호이스팅 시점에 **“선언 단계”** - 런타임에 **“초기화 단계”** 수행

이 때 스코프의 시작 지점부터 초기화 시작 지점까지 변수를 참조할 수 없는 구간을

**TDZ - 일시적 사각지대** 라고 부른다.

**4) 전역 객체와 let**

`var` 키워드로 선언한 전역 변수와 전역 함수, 선언하지 않은 변수에 값을 할당한 암묵적 전역은

전역 객체 `window` 의 프로퍼티가 된다. 전역객체의 프로퍼티를 참조할 때 window를 생략할 수 있다.

따라서 지역 레벨에서 전역 변수, 전역함수를 참조하고자 할 때

`window.x` , `window.foo()` 등으로 참조할 수 있는 것이다.

### 3. const 키워드

`const` 키워드는 상수를 선언하기 위해 일반적으로 사용한다.

`const` 키워드의 특징은 `let` 키워드와 대부분 동일하다.

**1) 선언과 초기화**

`const` 키워드로 선언한 변수는 반드시 선언과 동시에 초기화 해야 한다.

→ 상수화

```jsx
const x = 1;
```

**2) 재할당 금지**

```jsx
const x = 1;
x = 2; // TypeError
```

변수 `x` 는 1이라는 값으로 상수화 됐기 때문에 재할당할 수 없다.

**3) 상수**

```jsx
const MAX_VAL = 100000;
```

일반적으로 정해져 있는 상수값을 표현할 때,

해당 의미가 담긴 변수명을 대문자 + 스네이크 케이스로 표현한다.

**4) const 키워드와 객체**

```jsx
const person = {
  name: "Lee",
};

persone.name = "Kim";

console.log(person); // {name: "Kim"}
```

`const` 키워드는 재할당을 금지할 뿐 “불변”을 의미하지는 않는다.

`const` 로 선언한 객체 내부의 프로퍼티에 대한 변경은 가능하고, 변수에 할당된 참조값을 바꿀 수는 없다.

### 4. var vs let vs const

기본적으로 변수 선언에는 `const` 를 사용하고,

재할당이 필요한 변수에 한해 `let` 을 사용하는 것이 좋다.
